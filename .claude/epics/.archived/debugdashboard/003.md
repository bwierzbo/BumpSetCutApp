---
epic: debugdashboard
number: 003
title: Navigation and Dashboard Connection
status: closed
created: 2025-09-03T16:52:09Z
depends_on: [001]
parallel: true
conflicts_with: []
effort: S
estimate_days: 1
batch: core-integration
---

# Task 003: Navigation and Dashboard Connection

## Overview

Wire existing DebugDashboardView into post-processing workflow. Set up navigation destination with debugger instance passing and enable dashboard accessibility from processed video results. This task completes the user journey from debug mode processing to dashboard analysis.

## Context

This task works in parallel with Task 002, requiring only the UI foundation from Task 001. It establishes the navigation path from ProcessVideoView to the existing DebugDashboardView, completing the debug workflow integration.

## Technical Details

**Files to Modify:**
- `Presentation/Views/ProcessVideoView.swift` - Add navigation destination and debugger instance management
- `Presentation/Debug/DebugDashboardView.swift` - Verify and enhance initialization if needed

**Navigation Implementation:**
```swift
// In ProcessVideoView
@State private var trajectoryDebugger: TrajectoryDebugger?
@State private var showingDebugDashboard: Bool = false

// Navigation destination
.navigationDestination(isPresented: $showingDebugDashboard) {
    if let debugger = trajectoryDebugger {
        DebugDashboardView(debugger: debugger)
    } else {
        // Fallback view with error message
        DebugUnavailableView()
    }
}

// Button action
Button("View Debug Dashboard") {
    showingDebugDashboard = true
}
.disabled(trajectoryDebugger == nil)
```

**Instance Management:**
- Store TrajectoryDebugger instance after successful debug processing
- Manage debugger lifecycle during ProcessVideoView lifetime
- Handle memory cleanup when navigation dismissed

## Dashboard Integration

**DebugDashboardView Requirements:**
- Existing initializer: `init(debugger: TrajectoryDebugger)`
- Verify all 5 dashboard tabs load correctly with passed debugger instance
- Ensure parameter tuning interface remains functional
- Validate real-time chart updates with processed debug data

**Error Handling:**
```swift
// Fallback view when debugger unavailable
struct DebugUnavailableView: View {
    var body: some View {
        VStack(spacing: 20) {
            Image(systemName: "exclamationmark.triangle")
                .font(.system(size: 50))
                .foregroundColor(.orange)
            
            Text("Debug Data Unavailable")
                .font(.title2)
                .fontWeight(.semibold)
            
            Text("Debug data is no longer available for this session. Process a video with debug mode enabled to access the dashboard.")
                .multilineTextAlignment(.center)
                .foregroundColor(.secondary)
        }
        .padding()
        .navigationTitle("Debug Dashboard")
    }
}
```

## User Experience Flow

**Complete Debug Workflow:**
1. User enables debug toggle in ProcessVideoView
2. Video processing completes with debug data collection
3. "View Debug Dashboard" button becomes available
4. User taps button â†’ navigation to DebugDashboardView
5. Dashboard loads with comprehensive debug visualization
6. User can analyze metrics, tune parameters, and export data
7. Navigation back to ProcessVideoView maintains session context

**Navigation Patterns:**
- Standard SwiftUI navigation destination pattern
- Back navigation preserves ProcessVideoView state
- Dashboard can be accessed multiple times during session
- Navigation state resets appropriately on new video processing

## State Management

**ProcessVideoView State Variables:**
- `@State private var trajectoryDebugger: TrajectoryDebugger?` - Stores debugger instance
- `@State private var showingDebugDashboard: Bool = false` - Controls navigation presentation
- `@State private var hasDebugData: Bool = false` - Controls button visibility (from Task 001)

**Lifecycle Management:**
- Debugger instance created during video processing (Task 002)
- Instance persists for dashboard access throughout session
- Memory cleanup when ProcessVideoView dismissed or new video processed
- Navigation state properly resets between sessions

## Acceptance Criteria

### Navigation Setup
- [ ] NavigationDestination properly configured in ProcessVideoView
- [ ] DebugDashboardView initializes correctly with TrajectoryDebugger instance
- [ ] Navigation presents full-screen dashboard with proper navigation bar
- [ ] Back navigation returns to ProcessVideoView with preserved state

### Dashboard Integration
- [ ] All 5 dashboard tabs (Overview, Trajectory, Performance, Parameters, Export) load successfully
- [ ] Real debug data displays correctly in charts and metrics
- [ ] Parameter tuning interface remains functional
- [ ] Export functionality accessible from dashboard

### Error Handling
- [ ] Graceful handling when debugger instance unavailable
- [ ] DebugUnavailableView displays appropriate error message
- [ ] Button properly disabled when no debug data available
- [ ] No crashes or navigation failures in edge cases

### User Experience
- [ ] Smooth transition from ProcessVideoView to dashboard
- [ ] Dashboard loads within 2 seconds of navigation
- [ ] Navigation back preserves video processing results
- [ ] Button state accurately reflects debug data availability

### Memory Management
- [ ] TrajectoryDebugger instance properly retained during session
- [ ] Memory cleanup when ProcessVideoView dismissed
- [ ] No retain cycles between views and debugger instance
- [ ] Navigation state resets appropriately for new sessions

## Definition of Done

1. **Navigation Complete**: Seamless navigation from ProcessVideoView to DebugDashboardView
2. **Dashboard Functional**: All dashboard features work with processed debug data
3. **Error Handling Robust**: Graceful degradation when debug data unavailable
4. **Memory Management Sound**: Proper lifecycle management of debugger instances
5. **User Experience Polished**: Smooth workflow from debug processing to dashboard analysis
6. **Integration Tested**: Full debug workflow validated end-to-end

## Dependencies

**Requires Task 001**: Needs UI foundation and state variables for navigation control
**Parallel with Task 002**: Can implement navigation while VideoProcessor integration proceeds
**Enables Complete Workflow**: Completes the core debug dashboard integration

## Technical Notes

- DebugDashboardView already exists with full functionality
- Navigation implementation follows standard SwiftUI patterns
- Error handling ensures graceful degradation in edge cases
- Memory management prevents leaks during extended dashboard usage
- Task can proceed in parallel with Task 002 since both depend only on Task 001 UI foundation