---
name: Implement MetadataOverlayView with SwiftUI Canvas
status: completed
created: 2025-09-13T15:19:39Z
updated: 2025-09-13T15:19:39Z
github: [Will be updated when synced to GitHub]
depends_on: [001, 005]
parallel: true
conflicts_with: []
---

# Task: Implement MetadataOverlayView with SwiftUI Canvas

## Description
Create a SwiftUI Canvas-based overlay component that renders ball trajectories, rally boundaries, and confidence indicators in real-time during video playback. This leverages existing DebugAnnotator visualization logic adapted for runtime overlay display.

## Acceptance Criteria
- [ ] MetadataOverlayView renders ball trajectory paths using SwiftUI Canvas
- [ ] Rally boundary indicators (start/end timestamps) with visual highlights
- [ ] Real-time synchronization with video playback position
- [ ] Confidence score visualization with color-coded trajectory segments
- [ ] Performance optimization for smooth 60fps overlay rendering
- [ ] Toggle visibility option for overlay elements

## Technical Details
- **Location**: `BumpSetCut/Presentation/Components/MetadataOverlayView.swift` (new file)
- **Implementation approach**:
  - SwiftUI Canvas for high-performance drawing operations
  - Adapt existing DebugAnnotator overlay logic for runtime use
  - Time-based synchronization with AVPlayer currentTime
- **Key considerations**:
  - Canvas performance on older devices (iPhone 12 minimum)
  - Coordinate system mapping between metadata and video display
  - Memory efficiency for trajectory point rendering
- **Files affected**: New MetadataOverlayView, integration with RallyPlayerView

## Dependencies
- [ ] Task 001: ProcessingMetadata with trajectory data structure
- [ ] Task 005: RallyPlayerView for integration context
- [ ] Review existing DebugAnnotator rendering logic

## Effort Estimate
- Size: M
- Hours: 12 hours
- Parallel: true (overlay component can be developed independently)

## Definition of Done
- [ ] MetadataOverlayView renders trajectories and rally indicators
- [ ] Real-time synchronization with video playback achieved
- [ ] Performance benchmarks meet 60fps overlay rendering target
- [ ] Visual design matches existing BumpSetCut debug visualization
- [ ] Toggle functionality for overlay visibility implemented
- [ ] Testing covers various trajectory complexity scenarios