---
name: Create RallyPlayerView with Navigation
status: open
created: 2025-09-13T15:19:39Z
updated: 2025-09-13T15:19:39Z
github: [Will be updated when synced to GitHub]
depends_on: [003, 004]
parallel: true
conflicts_with: []
---

# Task: Create RallyPlayerView with Navigation

## Description
Create a new SwiftUI view for rally-by-rally navigation that loads metadata and provides seamless jumping between rally segments. This view will use AVPlayer seek functionality and gesture-based navigation for an intuitive user experience.

## Acceptance Criteria
- [ ] RallyPlayerView loads ProcessingMetadata for a given video
- [ ] Rally-by-rally navigation with swipe gestures (left/right)
- [ ] AVPlayer integration with precise seek-to-rally functionality
- [ ] Rally progress indicator showing current rally position
- [ ] Graceful handling of videos without metadata (fallback to normal playback)
- [ ] Performance optimization for rapid rally switching

## Technical Details
- **Location**: `BumpSetCut/Presentation/Views/RallyPlayerView.swift` (new file)
- **Implementation approach**:
  - SwiftUI view with AVPlayer integration
  - Use SwiftUI gesture recognizers for navigation
  - Lazy loading of rally segments for performance
- **Key considerations**:
  - AVPlayer seek precision (target <200ms rally switching)
  - Memory management for video player state
  - Consistent UI patterns with existing video playback
- **Files affected**: New RallyPlayerView, integration with existing video player components

## Dependencies
- [ ] Task 003: VideoMetadata extension with hasMetadata property
- [ ] Task 004: VideoProcessor metadata generation
- [ ] Review existing VideoPlayerView for integration patterns

## Effort Estimate
- Size: M
- Hours: 14 hours
- Parallel: true (UI component independent of other parallel tasks)

## Definition of Done
- [ ] RallyPlayerView implemented with full navigation functionality
- [ ] Gesture-based rally switching working smoothly
- [ ] AVPlayer seek performance optimized for rally jumping
- [ ] UI matches existing BumpSetCut design patterns
- [ ] Testing covers various rally count scenarios
- [ ] Performance benchmarks meet <200ms switching target