---
name: Implement Debug Export Service
status: completed
created: 2025-09-13T15:19:39Z
updated: 2025-09-13T15:19:39Z
github: [Will be updated when synced to GitHub]
depends_on: [001, 004]
parallel: true
conflicts_with: []
---

# Task: Implement Debug Export Service

## Description
Create a debug-only service for exporting annotated videos with burned-in overlays using ProcessingMetadata. This service extends the existing DebugAnnotator functionality to generate comprehensive visualization videos for algorithm validation and QA purposes.

## Acceptance Criteria
- [ ] DebugVideoExporter service generates annotated videos from metadata
- [ ] Overlays include ball trajectory lines, rally boundaries, and confidence scores
- [ ] Export functionality gated behind #if DEBUG compilation
- [ ] Generated videos saved to `/Documents/DebugExports/{video_id}_annotated.mov`
- [ ] Progress reporting during export process
- [ ] Integration with developer settings for easy access

## Technical Details
- **Location**: `BumpSetCut/Domain/Services/DebugVideoExporter.swift` (new file)
- **Implementation approach**:
  - Extend existing DebugAnnotator logic for metadata-based rendering
  - Use AVAssetReader/AVAssetWriter for frame-by-frame processing
  - Apply overlay rendering to each frame based on metadata timestamps
- **Key considerations**:
  - Debug-only compilation with #if DEBUG guards
  - Memory management for video processing operations
  - Consistent overlay styling with existing debug visualization
- **Files affected**: New DebugVideoExporter service, developer settings integration

## Dependencies
- [ ] Task 001: ProcessingMetadata structure for overlay data
- [ ] Task 004: VideoProcessor metadata generation
- [ ] Review existing DebugAnnotator overlay rendering logic

## Effort Estimate
- Size: M
- Hours: 10 hours
- Parallel: true (debug functionality independent of UI components)

## Definition of Done
- [ ] DebugVideoExporter generates annotated videos from metadata
- [ ] Debug compilation guards properly restrict functionality to development builds
- [ ] Export progress reporting and error handling implemented
- [ ] Visual overlays match existing debug video quality and style
- [ ] Developer settings integration for easy access during testing
- [ ] Performance acceptable for typical 5-10 minute volleyball videos