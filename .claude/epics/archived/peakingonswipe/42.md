---
name: Implement Peek UI Overlay System
status: open
created: 2025-09-17T00:31:13Z
updated: 2025-09-17T00:37:00Z
github: https://github.com/bwierzbo/BumpSetCutApp/issues/42
depends_on: [40, 41]
parallel: false
conflicts_with: [41]
---

# Task: Implement Peek UI Overlay System

## Description

Create the UI overlay system that displays peek frame previews during swipe gestures. Integrate with FrameExtractor service and gesture progress callbacks to show adjacent rally frames proportionally to swipe distance, maintaining visual consistency with current video player.

## Acceptance Criteria

- [ ] Overlay container displays peek frames above/alongside current video
- [ ] Peek frames scale and position proportionally to gesture progress
- [ ] Proper z-index management between current video and peek preview
- [ ] Handles different video aspect ratios consistently
- [ ] Smooth visual transitions during gesture progression
- [ ] Immediate cleanup of peek UI when gesture completes or cancels
- [ ] Consistent visual styling with existing rally player interface

## Technical Details

**Implementation Location:**
- Modify: `BumpSetCut/Presentation/Views/TikTokRallyPlayerView.swift`
- Add peek overlay container within existing view hierarchy

**Key Components:**
- Peek frame overlay view with SwiftUI Image display
- Progressive animation based on gesture progress values
- Integration with FrameExtractor service for frame loading
- Proper layout management for current video + peek frame positioning

**Code Considerations:**
- Use SwiftUI overlay modifier for peek frame display
- Calculate peek frame position based on swipe direction and progress
- Handle async frame loading with placeholder states
- Ensure peek frames match current video player dimensions and styling

## Dependencies

- [ ] FrameExtractor service (Task 001) for frame extraction
- [ ] Enhanced gesture handling (Task 002) for progress callbacks
- [ ] Current video player layout and styling system
- [ ] Existing rally metadata for adjacent video identification

## Effort Estimate

- **Size**: M
- **Hours**: 12-16 hours
- **Parallel**: false (requires Tasks 001 and 002 completion)

## Definition of Done

- [ ] Peek frames display correctly during swipe gestures
- [ ] Visual positioning matches gesture progress accurately
- [ ] Proper integration with FrameExtractor service
- [ ] Consistent handling of portrait and landscape orientations
- [ ] No visual artifacts during gesture cancellation
- [ ] Memory efficient with immediate resource cleanup
- [ ] Ready for animation integration and polish
